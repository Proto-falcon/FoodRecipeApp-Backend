(this.webpackJsonp=this.webpackJsonp||[]).push([[11],{215:function(e,t,n){"use strict";n.r(t),n.d(t,"AccountCtx",(function(){return l})),n.d(t,"default",(function(){return f}));var r=n(40),a=n.n(r),o=n(11),i=n.n(o),s=n(217),u=n(0),c=n(16),l=Object(u.createContext)({loggedIn:!1,username:"",email:"",setLoginStatus:function(){},setUsername:function(e){},setEmail:function(e){},checkCred:function(e,t){}});function f(e){var t=Object(u.useState)(!1),n=i()(t,2),r=n[0],o=n[1],f=Object(u.useState)(""),d=i()(f,2),b=d[0],m=d[1],h=Object(u.useState)(""),j=i()(h,2),p=j[0],g=j[1];function O(){return(O=a()((function*(e,t){if(!r)try{var n=yield s.default.get(t+"/api/checkLogin/"),a=yield n.data;e.setCsrfToken(a.token),0!=a.user&&(y(),C(a.user.username),S(a.user.email))}catch(o){}}))).apply(this,arguments)}function y(){o((function(e){return!e}))}function S(e){""==e?g(""):e.match(/^([a-zA-Z0-9]+\.?[a-zA-Z0-9]*)@[a-zA-Z0-9^\.]+\.([a-zA-Z]+\.?[a-zA-Z]*)$/)&&g(e)}function C(e){e.length>0?m(e):m("")}return Object(c.jsx)(l.Provider,{value:{loggedIn:r,username:b,email:p,setLoginStatus:y,setUsername:C,setEmail:S,checkCred:function(e,t){return O.apply(this,arguments)}},children:e.children})}},216:function(e,t,n){"use strict";n.r(t),n.d(t,"CsrfCtx",(function(){return s})),n.d(t,"default",(function(){return u}));var r=n(11),a=n.n(r),o=n(0),i=n(16),s=Object(o.createContext)({token:"",setCsrfToken:function(e){}});function u(e){var t=Object(o.useState)(""),n=a()(t,2),r=n[0],u=n[1];return Object(i.jsx)(s.Provider,{value:{token:r,setCsrfToken:function(e){u(e)}},children:e.children})}},218:function(e,t,n){"use strict";n.r(t);t.default=""},233:function(e,t,n){"use strict";n.r(t),n.d(t,"FormStyle",(function(){return r}));var r=n(7).default.create({formInput:{padding:5,marginTop:10,borderWidth:2,borderRadius:20},formLabel:{marginRight:10,textAlign:"left",fontWeight:"bold"},submitButton:{padding:10,margin:10,borderRadius:15,backgroundColor:"#fd5d00"}})},273:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return P}));var r=n(6),a=n.n(r),o=n(40),i=n.n(o),s=n(11),u=n.n(s),c=n(217),l=n(0),f=n(12),d=n(96),b=n(30),m=n(8),h=n(29),j=n(233),p=n(218),g=n(216),O=n(215),y=n(16);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=Object(l.lazy)((function(){return n.e(16).then(n.bind(null,235))})),x=Object(l.lazy)((function(){return n.e(3).then(n.bind(null,269))})),k=Object(l.lazy)((function(){return n.e(14).then(n.bind(null,270))})),w=/^([a-zA-Z0-9]+\.?[a-zA-Z0-9]*)@[a-zA-Z0-9^\.]+\.([a-zA-Z]+\.?[a-zA-Z]*)$/;function P(e){var t=e.route,n=e.navigation,r=Object(l.useContext)(g.CsrfCtx),a=Object(l.useContext)(O.AccountCtx),o=Object(l.useState)(t.params.toLogin),s=u()(o,2),S=s[0],P=(s[1],Object(l.useState)("")),z=u()(P,2),A=z[0],L=z[1],Z=Object(l.useState)(""),E=u()(Z,2),F=E[0],T=E[1],U=Object(l.useState)(""),W=u()(U,2),I=W[0],H=W[1],D=Object(l.useState)(!0),R=u()(D,2),B=R[0],J=R[1],$=Object(l.useState)(""),M=u()($,2),X=M[0],q=M[1],G=Object(l.useState)(!0),K=u()(G,2),N=K[0],Q=(K[1],Object(l.useState)({width:"25%",minWidth:"25%",maxWidth:"25%"})),V=u()(Q,2),Y=V[0],_=V[1];function ee(){return te.apply(this,arguments)}function te(){return(te=i()((function*(){if(S&&(A.length<=0||I<=0))q("Please fill all the fields/ enter corretly."),J(!1);else if(!S&&(A.length<=0||F.length<=0||I<=0))q("Please fill all the fields/ enter corretly."),J(!1);else{J(!0);var e="post",t="signup/";S&&(e="put",t="login/");try{var o=yield Object(c.default)({method:e,headers:{"X-CSRFToken":r.token,credentials:"include"},withCredentials:!0,url:p.default+"/api/"+t,responseType:"json",data:{username:A,email:F,password:I}}),i=yield o.data;i.signUpSuccess?(a.setLoginStatus(!0),a.setUsername(A),a.setEmail(F),n.navigate("Home")):i.loginSuccess&&(a.setLoginStatus(!0),a.setUsername(i.user.username),a.setEmail(i.user.email),n.navigate("Home"))}catch(s){q(s.response.data.message),J(!1)}}}))).apply(this,arguments)}return Object(l.useEffect)((function(){a.checkCred(r,p.default),"web"!=f.default.OS&&_({width:"50%",minWidth:"50%",maxWidth:"50%"})}),[N]),Object(y.jsxs)(m.default,{style:C(C({},h.styles.pageContainer),{},{alignItems:"center"}),children:[Object(y.jsx)(k,{toLogin:S,usernameHandler:function(e){e.length>50?(J(!1),q("Username too long")):(J(!0),L(e))},emailHandler:function(e){null!=e.match(w)?T(e):T("")},containerStyle:Y,labelStyle:j.FormStyle.formLabel,inputStyle:C(C({},j.FormStyle.formInput),{},{borderColor:B?"black":"red"})}),Object(y.jsx)(v,{label:"Password:",placeholder:"Please enter password:",isPassword:!0,onChangeTextHandler:function(e){H(e)},containerStyle:Y,labelStyle:j.FormStyle.formLabel,inputStyle:C(C({},j.FormStyle.formInput),{},{borderColor:B?"black":"red"})}),Object(y.jsx)((function(){return Object(y.jsx)(d.default,{style:j.FormStyle.submitButton,onPress:ee,children:Object(y.jsx)(b.default,{style:{fontWeight:"bold"},children:S?"Login":"Sign Up"})})}),{}),Object(y.jsx)(x,{hasError:!B,style:h.styles.errorMsg,message:X})]})}}}]);
//# sourceMappingURL=11.370dc9e8.chunk.js.map